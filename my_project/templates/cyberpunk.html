<!-- Cyberpunk Content Fragment -->
<!-- 动画类: crt-flicker -->
<div class="crt-flicker w-full max-w-xl mx-auto bg-black p-8 border-2 border-green-500 shadow-[0_0_20px_rgba(34,197,94,0.4)] relative overflow-hidden font-mono transition-all duration-300">
    
    <!-- 扫描线背景装饰 -->
    <div class="absolute inset-0 pointer-events-none bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-10 bg-[length:100%_2px,3px_100%]"></div>

    <!-- Header -->
    <div class="flex justify-between items-center mb-8 border-b border-green-800 pb-2 z-20 relative">
        <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
            <h2 class="text-green-400 text-xl font-bold uppercase tracking-widest">
                USER: <span class="text-purple-400">{{ alias }}</span>
            </h2>
        </div>
        <span class="text-xs text-green-700 animate-pulse">SYS.ROOT.ACCESS_GRANTED</span>
    </div>

    <!-- Body -->
    <div class="space-y-6 z-20 relative text-green-300">
        <div class="flex items-center gap-4">
            <span class="text-green-600">> CLASS:</span>
            <!-- 故障文字特效: glitch-text + data-text -->
            <span class="text-xl glitch-text" data-text="{{ role }}">{{ role }}</span>
        </div>

        <div class="flex items-center gap-4">
            <span class="text-green-600">> POWER_LEVEL:</span>
            <span class="text-yellow-400 font-bold">{{ power }}</span>
        </div>

        <div>
            <div class="text-green-600 mb-2">> INVENTORY_LOOT:</div>
            <ul class="space-y-1 ml-4 border-l border-green-800 pl-4">
                {% for item in loot %}
                <li class="hover:bg-green-900 hover:text-white cursor-pointer transition-colors px-1">
                    [x] {{ item }}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- Action Area (Step 5 新增) -->
    <div class="mt-8 flex items-center z-20 relative">
        <button 
            hx-post="/action/contact-cyberpunk" 
            hx-target="#cyber-contact-slot" 
            hx-swap="innerHTML"
            class="border border-green-500 text-green-500 px-4 py-2 text-sm font-mono hover:bg-green-500 hover:text-black transition-colors uppercase tracking-wider focus:outline-none focus:shadow-[0_0_10px_#22c55e]">
            [ ESTABLISH UPLINK ]
        </button>
        <!-- 结果显示槽位 -->
        <span id="cyber-contact-slot"></span>
    </div>

    <!-- Footer -->
    <div class="mt-8 pt-2 border-t border-green-900 text-right z-20 relative">
        <span class="text-xs text-green-800">Connection secure via PROXY_CHAIN_7</span>
    </div>
</div>

<!-- 【HTMX OOB控制】: 切换背景为深色 -->
<div id="global-bg" class="fixed inset-0 -z-10 bg-gray-900 transition-colors duration-300" hx-swap-oob="true"></div>